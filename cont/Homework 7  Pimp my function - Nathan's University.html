<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0078)http://nathansuniversity.com/vanilla/discussion/83/homework-7-pimp-my-function -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-ca"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Homework 7: Pimp my function - Nathan's University</title>
<link rel="stylesheet" type="text/css" href="./Homework 7  Pimp my function - Nathan's University_files/style.css" media="all">
<link rel="stylesheet" type="text/css" href="./Homework 7  Pimp my function - Nathan's University_files/fileupload.css" media="all">
<link rel="stylesheet" type="text/css" href="./Homework 7  Pimp my function - Nathan's University_files/voting.css" media="all">
<link rel="stylesheet" type="text/css" href="./Homework 7  Pimp my function - Nathan's University_files/styles.css" media="all">
<link rel="shortcut icon" href="http://nathansuniversity.com/vanilla/themes/default/design/favicon.png" type="image/x-icon">
<link rel="canonical" href="http://nathansuniversity.com/vanilla/discussion/83/homework-7-pimp-my-function/p1">
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.livequery.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.form.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.popup.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.gardenhandleajaxform.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/global.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.ui.packed.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/jquery.autogrow.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/options.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/bookmark.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/discussion.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/autosave.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/fileupload.js" type="text/javascript"></script>
<script src="./Homework 7  Pimp my function - Nathan's University_files/voting.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function(){
	var shrink = jQuery(".geshi_syntax").width();
	jQuery(".geshi_syntax").hover(function() {
		var expand = jQuery("table", this).width();
		if (expand > shrink) {
			jQuery(this)
				.stop(true, false)
				.css({
					zIndex: "100",
					position: "relative"
				})
				.animate({
					width: expand + "px"
				});
		}
	},
	function() {
		jQuery(this)
			.stop(true, false)
			.animate({
				width: shrink + "px"
			});
	});
});
</script>
		
</head>
<body id="vanilla_discussion_index" class="Vanilla Discussion Index ">
   <div id="Frame">
      <div id="Head">
         <div class="Menu">
            <h1><a class="Title" href="http://nathansuniversity.com/vanilla/"><span>Nathan's University</span></a></h1>
            <ul id="Menu"><li class=" Highlight"><a href="http://nathansuniversity.com/vanilla/discussions">Discussions</a></li>
<li><a href="http://nathansuniversity.com/vanilla/activity">Activity</a></li>
<li class="NonTab"><a class="SignInPopup" href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function">Sign In</a></li>
</ul>            <div class="Search"><form method="get" action="http://nathansuniversity.com/vanilla/search">
<div>
<input type="text" id="Form_Search" name="Search" value="" class="InputBox"><input type="submit" id="Form_Go" value="Go" class="Button">
</div>
</form></div>
         </div>
      </div>
      <div id="Body">
         <div id="Content"><div class="Tabs HeadingTabs DiscussionTabs FirstPage">
   
   <ul>
      <li><a href="http://nathansuniversity.com/vanilla/categories/pl101" class="TabLink">PL101</a></li>
   </ul>
   <div class="SubTab">Homework 7: Pimp my function</div>
</div>
<ul class="DataList MessageList Discussion FirstPage">
   <li class="Item Comment FirstComment" id="Discussion_83">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="Nathan" href="http://nathansuniversity.com/vanilla/profile/1/Nathan" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/nVFM3K0TA06PA.jpg" alt="Nathan" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/1/Nathan">Nathan</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/83/homework-7-pimp-my-function/p1" class="Permalink" name="Item_1" rel="nofollow">May 19</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style><style type="text/css">/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.javascript  {font-family:monospace;}
.javascript .imp {font-weight: bold; color: red;}
.javascript .kw1 {color: #000066; font-weight: bold;}
.javascript .kw2 {color: #003366; font-weight: bold;}
.javascript .kw3 {color: #000066;}
.javascript .co1 {color: #006600; font-style: italic;}
.javascript .co2 {color: #009966; font-style: italic;}
.javascript .coMULTI {color: #006600; font-style: italic;}
.javascript .es0 {color: #000099; font-weight: bold;}
.javascript .br0 {color: #009900;}
.javascript .sy0 {color: #339933;}
.javascript .st0 {color: #3366CC;}
.javascript .nu0 {color: #CC0000;}
.javascript .me1 {color: #660066;}
.javascript span.xtra { display:block; }
</style>In this episode of "pimp my function" you'll show off recursive functions that you have transformed to continuation-passing style, thunked out, and trampolined.		</div>
         </div>
</li>
		<li>
			<div class="Tabs DiscussionTabs AnswerTabs">
			<strong>19 Comments</strong> sorted by 
				<ul>
					<li class="Active"><a href="http://nathansuniversity.com/vanilla/discussion/83/homework-7-pimp-my-function?Sort=popular" rel="nofollow">Votes</a></li>
					<li><a href="http://nathansuniversity.com/vanilla/discussion/83/homework-7-pimp-my-function?Sort=date" rel="nofollow">Date Added</a></li>
				</ul>			</div>
		</li>
		<li class="Item Comment Alt" id="Comment_1560">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>1</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="fzan" href="http://nathansuniversity.com/vanilla/profile/174/fzan" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar.php" alt="fzan" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/174/fzan">fzan</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1560#Comment_1560" class="Permalink" name="Item_2" rel="nofollow">May 21</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			A variant of the scheem language interpreter. I went straight for the thunk version.<br><br>It has:<br> - +,-<br> - = (equality test)<br> - if<br> - define<br> - let<br> - set!<br> - log (just print a value to console.log)<br> - lambda-one<br> - app-one (single application)<br><br>the additional constructs are:<br> - label name body: saves the current continuation in the environment. When a jumped to the label, it will return as if the value was the one returned from the body.<br> - jump name body: jump to the name label, passing the value of the body.<br><br>With these two constructs is possible to model a great variety of non-local flow controls.<br>In the tests I made a simple "for loop" (here in scheem syntax):<br><pre><br>(begin<br>(define x 0)<br>(set! x (label loop 0))<br>(if (= x 10)<br>	x<br>	(begin<br>	(log x)<br>	(jump loop (+ x 1)))))<br></pre><br><br>So at the beginning "x" is defined to 0.<br>Then the set! is called, the "loop" label is defined and 0 returned.<br>After that, the "if" is evaluated, and since x != 10, the "else" branch is evaluated.<br>Here we just print the current value of x, and then "jump" to the loop label, passing x+1 as value.<br>Then magic happens, and what is evaluated is basically "(set! x 1)", and well, the cycle continues.<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> thunks <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>exprs<span class="sy0">,</span>fn<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw2">var</span> next <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>idx<span class="sy0">,</span>curval<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw2">var</span> nextVal <span class="sy0">=</span> fn<span class="br0">(</span>v<span class="sy0">,</span>curval<span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw2">var</span> nextId <span class="sy0">=</span> idx<span class="sy0">+</span><span class="nu0">1</span><span class="sy0">;</span><br>			<span class="kw1">if</span><span class="br0">(</span>nextId <span class="sy0">===</span> exprs.<span class="me1">length</span><span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span>nextVal<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>exprs<span class="br0">[</span>nextId<span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>next<span class="br0">(</span>nextId<span class="sy0">,</span>nextVal<span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><span class="sy0">;</span><br>	<span class="br0">}</span><span class="sy0">;</span><br>	<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>exprs<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>next<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span>undefined<span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br><span class="kw2">var</span> pairThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>e1<span class="sy0">,</span>e2<span class="sy0">,</span>fn<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">return</span> thunks<span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span><span class="br0">[</span>e1<span class="sy0">,</span>e2<span class="br0">]</span><span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>v<span class="sy0">,</span>val<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">if</span><span class="br0">(</span>val<span class="sy0">===</span>undefined<span class="br0">)</span> <span class="br0">{</span><span class="kw1">return</span> v<span class="sy0">;</span><span class="br0">}</span><br>		<span class="kw1">return</span> fn<span class="br0">(</span>val<span class="sy0">,</span>v<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br><span class="kw2">var</span> evalThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>expr<span class="sy0">,</span> env<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">if</span><span class="br0">(</span><span class="kw1">typeof</span> expr <span class="sy0">===</span> <span class="st0">'number'</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>expr<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">if</span><span class="br0">(</span><span class="kw1">typeof</span> expr <span class="sy0">===</span> <span class="st0">'string'</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw2">var</span> val <span class="sy0">=</span> lookup<span class="br0">(</span>env<span class="sy0">,</span> expr<span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>val<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">switch</span><span class="br0">(</span>expr<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span><br>			<span class="kw1">return</span> pairThunk<span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>a<span class="sy0">,</span>b<span class="br0">)</span><span class="br0">{</span><span class="kw1">return</span> a<span class="sy0">+</span>b<span class="sy0">;</span><span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span><br>			<span class="kw1">return</span> pairThunk<span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>a<span class="sy0">,</span>b<span class="br0">)</span><span class="br0">{</span><span class="kw1">return</span> a<span class="sy0">-</span>b<span class="sy0">;</span><span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'='</span><span class="sy0">:</span><br>			<span class="kw1">return</span> pairThunk<span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>a<span class="sy0">,</span>b<span class="br0">)</span><span class="br0">{</span><span class="kw1">return</span> a<span class="sy0">===</span>b<span class="sy0">;</span><span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'if'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw2">var</span> nextExpr <span class="sy0">=</span> v <span class="sy0">?</span> expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span> <span class="sy0">:</span> expr<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="sy0">;</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>nextExpr<span class="sy0">,</span>env<span class="sy0">,</span>cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>cnt<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'let'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> <span class="kw3">name</span> <span class="sy0">=</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span><br>			<span class="kw2">var</span> lexpr <span class="sy0">=</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span><br>			<span class="kw2">var</span> body <span class="sy0">=</span> expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">;</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>body<span class="sy0">,</span> define<span class="br0">(</span>env<span class="sy0">,</span><span class="kw3">name</span><span class="sy0">,</span>v<span class="br0">)</span><span class="sy0">,</span> cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>lexpr<span class="sy0">,</span>env<span class="sy0">,</span>cnt<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'define'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>				define<span class="br0">(</span>env<span class="sy0">,</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> v<span class="br0">)</span><span class="sy0">;</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>cnt<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'set!'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>				update<span class="br0">(</span>env<span class="sy0">,</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> v<span class="br0">)</span><span class="sy0">;</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>cnt<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'label'</span><span class="sy0">:</span><br>			env.<span class="me1">bindings</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">]</span> <span class="sy0">=</span> cont<span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span>v<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><span class="br0">}</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'jump'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> newCont <span class="sy0">=</span> lookup<span class="br0">(</span>env<span class="sy0">,</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><span class="kw1">return</span> thunk<span class="br0">(</span>newCont<span class="sy0">,</span><span class="br0">[</span>v<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><span class="br0">}</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'begin'</span><span class="sy0">:</span><br>			<span class="kw1">return</span> thunks<span class="br0">(</span>env<span class="sy0">,</span>cont<span class="sy0">,</span>expr.<span class="me1">slice</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span><span class="br0">{</span><span class="kw1">return</span> v<span class="sy0">;</span><span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'log'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>				console.<span class="me1">log</span><span class="br0">(</span>v<span class="br0">)</span><span class="sy0">;</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span>env<span class="sy0">,</span>cnt<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'lambda-one'</span><span class="sy0">:</span><br>			<span class="kw2">var</span> arg <span class="sy0">=</span> expr<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span><br>			<span class="kw2">var</span> body <span class="sy0">=</span> expr<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">;</span><br>			<span class="kw2">var</span> newenv <span class="sy0">=</span> <span class="br0">{</span>bindings<span class="sy0">:</span><span class="br0">{</span><span class="br0">}</span><span class="sy0">,</span>outer<span class="sy0">:</span>env<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span><span class="br0">{</span><br>				body<span class="sy0">:</span> body<span class="sy0">,</span><br>				env<span class="sy0">:</span> newenv<span class="sy0">,</span><br>				argName<span class="sy0">:</span> arg<br>			<span class="br0">}</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw2">default</span><span class="sy0">:</span><br>			<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>f<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw2">var</span> funcObj <span class="sy0">=</span> f<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span><br>				<span class="kw2">var</span> argValue <span class="sy0">=</span> f<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span><br>				<span class="kw1">if</span><span class="br0">(</span>funcObj <span class="kw1">instanceof</span> <span class="kw2">Function</span><span class="br0">)</span> <span class="br0">{</span><br>					<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span> funcObj<span class="br0">(</span>argValue<span class="br0">)</span> <span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>				<span class="br0">}</span><br>				funcObj.<span class="me1">env</span>.<span class="me1">bindings</span><span class="br0">[</span>funcObj.<span class="me1">argName</span><span class="br0">]</span> <span class="sy0">=</span> argValue<span class="sy0">;</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>evalThunk<span class="sy0">,</span><span class="br0">[</span>funcObj.<span class="me1">body</span><span class="sy0">,</span>funcObj.<span class="me1">env</span><span class="sy0">,</span>cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunks<span class="br0">(</span>env<span class="sy0">,</span>cnt<span class="sy0">,</span>expr<span class="sy0">,</span><span class="kw2">function</span><span class="br0">(</span>v<span class="sy0">,</span>val<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span>val<span class="br0">)</span> <span class="br0">{</span><span class="kw1">return</span> <span class="br0">[</span>v<span class="br0">]</span><span class="sy0">;</span><span class="br0">}</span><br>				val.<span class="me1">push</span><span class="br0">(</span>v<span class="br0">)</span><span class="sy0">;</span><br>				<span class="kw1">return</span> val<span class="sy0">;</span><br>			<span class="br0">}</span><span class="br0">)</span><br>	<span class="br0">}</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw2">var</span> <span class="kw1">eval</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>expr<span class="sy0">,</span>env<span class="br0">)</span> <span class="br0">{</span><br>	env <span class="sy0">=</span> env <span class="sy0">||</span> <span class="br0">{</span>bindings<span class="sy0">:</span><span class="br0">{</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>	<span class="kw1">return</span> trampoline<span class="br0">(</span> evalThunk<span class="br0">(</span>expr<span class="sy0">,</span>env<span class="sy0">,</span>thunkValue<span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div>		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1551">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="davidk01" href="http://nathansuniversity.com/vanilla/profile/443/davidk01" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(1).php" alt="davidk01" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/443/davidk01">davidk01</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1551#Comment_1551" class="Permalink" name="Item_3" rel="nofollow">May 20</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Here's the Fibonacci. I'm still working on some of the other examples listed in the homework assignment.<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="co1">// recursive fibonacci</span><br><span class="kw2">var</span> fibonacci <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>n<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span> <span class="br0">(</span>n <span class="sy0">&lt;=</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span><br>  <span class="br0">}</span><br>  <span class="kw1">return</span> fibonacci<span class="br0">(</span>n <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">+</span> fibonacci<span class="br0">(</span>n <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="co1">// cps fibonacci</span><br><span class="kw2">var</span> fibonacciCPS <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>n<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span> <span class="br0">(</span>n <span class="sy0">&lt;=</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw1">return</span> cont<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><br>  <span class="kw2">var</span> new_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> sub_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>y<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw1">return</span> cont<span class="br0">(</span>v <span class="sy0">+</span> y<span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> fibonacciCPS<span class="br0">(</span>n <span class="sy0">-</span> <span class="nu0">2</span><span class="sy0">,</span> sub_cont<span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="sy0">;</span><br>  <span class="kw1">return</span> fibonacciCPS<span class="br0">(</span>n <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">,</span> new_cont<span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="co1">// thunked fibonacci</span><br><span class="kw2">var</span> fibonacciThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>n<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span> <span class="br0">(</span>n <span class="sy0">&lt;=</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><br>  <span class="kw2">var</span> new_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> sub_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>y<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>v <span class="sy0">+</span> y<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> thunk<span class="br0">(</span>fibonacciThunk<span class="sy0">,</span> <span class="br0">[</span>n <span class="sy0">-</span> <span class="nu0">2</span><span class="sy0">,</span> sub_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="sy0">;</span><br>  <span class="kw1">return</span> thunk<span class="br0">(</span>fibonacciThunk<span class="sy0">,</span> <span class="br0">[</span>n <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">,</span> new_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div>		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1554">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="Vlahupetar" href="http://nathansuniversity.com/vanilla/profile/247/Vlahupetar" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(2).php" alt="Vlahupetar" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/247/Vlahupetar">Vlahupetar</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1554#Comment_1554" class="Permalink" name="Item_4" rel="nofollow">May 20</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			quick sort<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> qsort <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>list<span class="br0">)</span><span class="br0">{</span><br>	<span class="kw1">if</span> <span class="br0">(</span>list.<span class="me1">length</span> <span class="sy0">&lt;=</span> <span class="nu0">1</span><span class="br0">)</span><br>		<span class="kw1">return</span> list<span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> pivot <span class="sy0">=</span> list<span class="br0">[</span>list.<span class="me1">length</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> lows <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> mids <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> highs <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">for</span> <span class="br0">(</span><span class="kw2">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>list.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span><br>		<span class="kw2">var</span> <span class="kw1">item</span> <span class="sy0">=</span> list<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span><span class="kw1">item</span> <span class="sy0">===</span> pivot<span class="br0">)</span><br>			mids.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>item<span class="sy0">&lt;</span>pivot<span class="br0">)</span><br>			lows.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span><br>			highs.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> qsort<span class="br0">(</span>lows<span class="br0">)</span>.<span class="me1">concat</span><span class="br0">(</span>mids<span class="br0">)</span>.<span class="me1">concat</span><span class="br0">(</span>qsort<span class="br0">(</span>highs<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw2">var</span> qsortCPS <span class="sy0">=</span><span class="kw2">function</span><span class="br0">(</span>list<span class="sy0">,</span> cont<span class="br0">)</span><span class="br0">{</span><br>	<span class="kw1">if</span> <span class="br0">(</span>list.<span class="me1">length</span> <span class="sy0">&lt;=</span> <span class="nu0">1</span><span class="br0">)</span><br>		<span class="kw1">return</span> cont<span class="br0">(</span>list<span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> pivot <span class="sy0">=</span> list<span class="br0">[</span>Math.<span class="me1">round</span><span class="br0">(</span>list.<span class="me1">length</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> lows <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> mids <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> highs <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">for</span> <span class="br0">(</span><span class="kw2">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>list.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span><br>		<span class="kw2">var</span> <span class="kw1">item</span> <span class="sy0">=</span> list<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span><span class="kw1">item</span> <span class="sy0">===</span> pivot<span class="br0">)</span><br>			mids.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>item<span class="sy0">&lt;</span>pivot<span class="br0">)</span><br>			lows.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span><br>			highs.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	<span class="kw2">var</span> l_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>l<span class="br0">)</span><span class="br0">{</span><br>		<span class="kw2">var</span> h_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">{</span><br>			<span class="kw1">return</span> cont<span class="br0">(</span>l.<span class="me1">concat</span><span class="br0">(</span>mids<span class="br0">)</span>.<span class="me1">concat</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><br>		<span class="kw1">return</span> qsortCPS<span class="br0">(</span>highs<span class="sy0">,</span> h_cont<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	<span class="kw1">return</span> qsortCPS<span class="br0">(</span>lows<span class="sy0">,</span> l_cont<span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="br0">}</span><br>&nbsp;<br><span class="kw2">var</span> qsortThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>list<span class="sy0">,</span> cont<span class="br0">)</span><span class="br0">{</span><br>&nbsp;<br>	<span class="kw1">if</span> <span class="br0">(</span>list.<span class="me1">length</span> <span class="sy0">&lt;=</span> <span class="nu0">1</span><span class="br0">)</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>list<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> pivot <span class="sy0">=</span> list<span class="br0">[</span>Math.<span class="me1">round</span><span class="br0">(</span>list.<span class="me1">length</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw2">var</span> lows <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> mids <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>	<span class="kw2">var</span> highs <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">for</span> <span class="br0">(</span><span class="kw2">var</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>list.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span><br>		<span class="kw2">var</span> <span class="kw1">item</span> <span class="sy0">=</span> list<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span><span class="kw1">item</span> <span class="sy0">===</span> pivot<span class="br0">)</span><br>			mids.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>item<span class="sy0">&lt;</span>pivot<span class="br0">)</span><br>			lows.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">else</span><br>			highs.<span class="me1">push</span><span class="br0">(</span><span class="kw1">item</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	<span class="kw2">var</span> l_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>l<span class="br0">)</span><span class="br0">{</span><br>		<span class="kw2">var</span> h_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">{</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>l.<span class="me1">concat</span><span class="br0">(</span>mids<span class="br0">)</span>.<span class="me1">concat</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>			<br>		<span class="br0">}</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>qsortThunk<span class="sy0">,</span> <span class="br0">[</span>highs<span class="sy0">,</span> h_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> thunk<span class="br0">(</span>qsortThunk<span class="sy0">,</span> <span class="br0">[</span>lows<span class="sy0">,</span> l_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span></pre></div></td></tr></tbody></table></div>		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1557">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="lordlorik" href="http://nathansuniversity.com/vanilla/profile/438/lordlorik" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(3).php" alt="lordlorik" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/438/lordlorik">lordlorik</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1557#Comment_1557" class="Permalink" name="Item_5" rel="nofollow">May 20</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Recursive AST evaluator. To ease implementation, I used a helper function for the CPS version and a different one, but similar, for the thunked version.<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="co1">// Original version</span><br>&nbsp;<br><span class="kw2">var</span> calc <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>tree<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">switch</span> <span class="br0">(</span>tree.<span class="me1">tag</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">case</span> <span class="st0">'number'</span><span class="sy0">:</span> <span class="kw1">return</span> tree.<span class="me1">value</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">left</span><span class="br0">)</span> <span class="sy0">+</span> calc<span class="br0">(</span>tree.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">left</span><span class="br0">)</span> <span class="sy0">-</span> calc<span class="br0">(</span>tree.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">left</span><span class="br0">)</span> <span class="sy0">*</span> calc<span class="br0">(</span>tree.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">left</span><span class="br0">)</span> <span class="sy0">/</span> calc<span class="br0">(</span>tree.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="co1">// Continuation-passing style version</span><br>&nbsp;<br><span class="kw2">var</span> calc_cps <span class="sy0">=</span> <span class="br0">(</span><span class="kw2">function</span> <span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw2">var</span> newCont <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> op<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw2">var</span> cont1 <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw2">var</span> cont2 <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>w<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">return</span> cont<span class="br0">(</span>op<span class="br0">(</span>v<span class="sy0">,</span> w<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">right</span><span class="sy0">,</span> cont2<span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><span class="sy0">;</span><br>		<span class="kw1">return</span> calc<span class="br0">(</span>tree.<span class="me1">left</span><span class="sy0">,</span> cont2<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	<span class="kw2">var</span> calc <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">switch</span> <span class="br0">(</span>tree.<span class="me1">tag</span><span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw1">case</span> <span class="st0">'number'</span><span class="sy0">:</span> <span class="kw1">return</span> cont<span class="br0">(</span>tree.<span class="me1">value</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">+</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">-</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">*</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">/</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><br>		<span class="kw1">return</span> cont<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> calc<span class="sy0">;</span><br><span class="br0">}</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="co1">// Thunked version</span><br>&nbsp;<br><span class="kw2">var</span> calc_thunk <span class="sy0">=</span> <span class="br0">(</span><span class="kw2">function</span> <span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw2">var</span> newCont <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> op<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw2">var</span> cont1 <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>v<span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw2">var</span> cont2 <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>w<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>op<span class="br0">(</span>v<span class="sy0">,</span> w<span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="br0">}</span><span class="sy0">;</span><br>			<span class="kw1">return</span> thunk<span class="br0">(</span>calc<span class="sy0">,</span> <span class="br0">[</span>tree.<span class="me1">right</span><span class="sy0">,</span> cont2<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><span class="sy0">;</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>calc<span class="sy0">,</span> <span class="br0">[</span>tree.<span class="me1">left</span><span class="sy0">,</span> cont1<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	<span class="kw2">var</span> calc <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">switch</span> <span class="br0">(</span>tree.<span class="me1">tag</span><span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw1">case</span> <span class="st0">'number'</span><span class="sy0">:</span> <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span>tree.<span class="me1">value</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">+</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">-</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">*</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>			<span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> newCont<span class="br0">(</span>tree<span class="sy0">,</span> cont<span class="sy0">,</span> <span class="kw2">function</span> <span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> x <span class="sy0">/</span> y<span class="sy0">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>		<span class="br0">}</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> calc<span class="sy0">;</span><br><span class="br0">}</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div>		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1558">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="dmi" href="http://nathansuniversity.com/vanilla/profile/824/dmi" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/nNT8SLSZVM1PP.png" alt="dmi" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/824/dmi">dmi</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1558#Comment_1558" class="Permalink" name="Item_6" rel="nofollow">May 21</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a rel="nofollow" href="http://nathansuniversity.com/vanilla/profile/lordlorik">@lordlorik</a>: I think there's a typo in your CPS version of calc: should you not have <code>return calc(tree.left, cont1);</code> the second time?		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1561">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="lordlorik" href="http://nathansuniversity.com/vanilla/profile/438/lordlorik" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(3).php" alt="lordlorik" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/438/lordlorik">lordlorik</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1561#Comment_1561" class="Permalink" name="Item_7" rel="nofollow">May 21</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a href="http://nathansuniversity.com/vanilla/profile/dmi">@dmi</a>: you're totally right. That's what you get when you copy-paste stuff around... Thanks a lot, mate!		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1562">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="dmi" href="http://nathansuniversity.com/vanilla/profile/824/dmi" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/nNT8SLSZVM1PP.png" alt="dmi" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/824/dmi">dmi</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1562#Comment_1562" class="Permalink" name="Item_8" rel="nofollow">May 21</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a href="http://nathansuniversity.com/vanilla/profile/lordlorik">@lordlorik</a>: No problem -- happy to help!<br><br>I'm not sure if I'm actually going to post anything this week though; feeling kinda uninspired. I can see it's a useful technique, but I can't come up with any particular applications!		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1577">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="lmpessoa" href="http://nathansuniversity.com/vanilla/profile/525/lmpessoa" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/nBQY6MT8BDJA3.jpg" alt="lmpessoa" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/525/lmpessoa">lmpessoa</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1577#Comment_1577" class="Permalink" name="Item_9" rel="nofollow">May 22</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			I'm going to follow <a href="http://nathansuniversity.com/vanilla/profile/dmi">@dmi</a> here: not much inspired to create these recursive calls but this technique will certainly be useful for my language; I was already trying to figure out how to do this!		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1581">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="pdcawley" href="http://nathansuniversity.com/vanilla/profile/810/pdcawley" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(4).php" alt="pdcawley" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/810/pdcawley">pdcawley</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1581#Comment_1581" class="Permalink" name="Item_10" rel="nofollow">May 22</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			So, ever since I read the SICP section on non deterministic computing, so here's my shot at doing it in Javascript with thunked continuations (I haven't tried it with non-thunked, but I reckon that the backtracking involved in this sort of thing could end up with the stack getting blown rather swiftly.<br><br>So… non-deterministic computing? What's that about then.<br><br>Consider the following problem:<br><blockquote><div><br>Baker, Cooper, Fletcher, Miller, and Smith live on different floors of an apartment house that contains only five floors. Baker does not live on the top floor. Cooper does not live on the bottom floor. Fletcher does not live on either the top or the bottom floor. Miller lives on a higher floor than does Cooper. Smith does not live on a floor adjacent to Fletcher's. Fletcher does not live on a floor adjacent to Cooper's. Where does everyone live?<br></div></blockquote><br><br>How do we solve that in code. Here's my shot at it:<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript">  ambeval <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>func<span class="sy0">,</span> onFailure<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> makeAmb<span class="sy0">;</span><br>    makeAmb <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>failCont<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw2">var</span> amb<span class="sy0">,</span> fail<span class="sy0">;</span><br>      fail <span class="sy0">=</span> thunk<span class="br0">(</span>failCont<span class="sy0">,</span> <span class="br0">[</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>      <span class="kw1">return</span> amb <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>lst<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw2">var</span> choice<span class="sy0">,</span> choices<span class="sy0">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>lst <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="sy0">||</span> lst.<span class="me1">length</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span><br>          <span class="kw1">return</span> fail<span class="sy0">;</span><br>        <span class="br0">}</span> <br>        <span class="kw1">else</span> <span class="br0">{</span><br>          choice <span class="sy0">=</span> lst<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> choices <span class="sy0">=</span> <span class="nu0">2</span> <span class="sy0">&lt;=</span> lst.<span class="me1">length</span> <span class="sy0">?</span> __slice.<span class="me1">call</span><span class="br0">(</span>lst<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">:</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>          <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span><br>            choice<span class="sy0">,</span> makeAmb<span class="br0">(</span><span class="kw2">function</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><br>              <span class="kw1">return</span> amb<span class="br0">(</span>choices<span class="sy0">,</span> cont<span class="br0">)</span><span class="sy0">;</span><br>            <span class="br0">}</span><span class="br0">)</span><br>          <span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="br0">}</span><br>      <span class="br0">}</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> trampoline<span class="br0">(</span>thunk<span class="br0">(</span>func<span class="sy0">,</span> <span class="br0">[</span><br>      onFailure <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">?</span> onFailure <span class="sy0">:</span> makeAmb<span class="br0">(</span><span class="kw2">function</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw1">throw</span> <span class="kw2">new</span> Error<span class="br0">(</span><span class="st0">"Ran out of fail continuations"</span><span class="br0">)</span><span class="sy0">;</span><br>      <span class="br0">}</span><span class="br0">)</span><br>    <span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>  ambeval<span class="br0">(</span><span class="kw2">function</span><span class="br0">(</span>amb<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> except<span class="sy0">,</span> slots<span class="sy0">;</span><br>    slots <span class="sy0">=</span> <span class="br0">[</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">]</span><span class="sy0">;</span><br>    except <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>val<span class="sy0">,</span> lst<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw2">var</span> i<span class="sy0">,</span> _i<span class="sy0">,</span> _len<span class="sy0">,</span> _results<span class="sy0">;</span><br>      _results <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>      <span class="kw1">for</span> <span class="br0">(</span>_i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> _len <span class="sy0">=</span> lst.<span class="me1">length</span><span class="sy0">;</span> _i <span class="sy0">&lt;</span> _len<span class="sy0">;</span> _i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>        i <span class="sy0">=</span> lst<span class="br0">[</span>_i<span class="br0">]</span><span class="sy0">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">!==</span> val<span class="br0">)</span> <span class="br0">{</span><br>          _results.<span class="me1">push</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span><br>        <span class="br0">}</span><br>      <span class="br0">}</span><br>      <span class="kw1">return</span> _results<span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> amb<span class="br0">(</span>slots<span class="sy0">,</span> <span class="kw2">function</span><span class="br0">(</span>baker<span class="sy0">,</span> amb<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw2">var</span> cslots<span class="sy0">;</span><br>      cslots <span class="sy0">=</span> except<span class="br0">(</span>baker<span class="sy0">,</span> slots<span class="br0">)</span><span class="sy0">;</span><br>      <span class="kw1">return</span> amb<span class="br0">(</span>cslots<span class="sy0">,</span> <span class="kw2">function</span><span class="br0">(</span>cooper<span class="sy0">,</span> amb<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw2">var</span> fslots<span class="sy0">;</span><br>        fslots <span class="sy0">=</span> except<span class="br0">(</span>cooper<span class="sy0">,</span> cslots<span class="br0">)</span><span class="sy0">;</span><br>        <span class="kw1">return</span> amb<span class="br0">(</span>fslots<span class="sy0">,</span> <span class="kw2">function</span><span class="br0">(</span>fletcher<span class="sy0">,</span> amb<span class="br0">)</span> <span class="br0">{</span><br>          <span class="kw2">var</span> mslots<span class="sy0">;</span><br>          mslots <span class="sy0">=</span> except<span class="br0">(</span>fletcher<span class="sy0">,</span> fslots<span class="br0">)</span><span class="sy0">;</span><br>          <span class="kw1">return</span> amb<span class="br0">(</span>mslots<span class="sy0">,</span> <span class="kw2">function</span><span class="br0">(</span>miller<span class="sy0">,</span> amb<span class="br0">)</span> <span class="br0">{</span><br>            <span class="kw2">var</span> sslots<span class="sy0">;</span><br>            sslots <span class="sy0">=</span> except<span class="br0">(</span>miller<span class="sy0">,</span> mslots<span class="br0">)</span><span class="sy0">;</span><br>            <span class="kw1">return</span> amb<span class="br0">(</span>sslots<span class="sy0">,</span> <span class="kw2">function</span><span class="br0">(</span>smith<span class="sy0">,</span> amb<span class="br0">)</span> <span class="br0">{</span><br>              <span class="kw1">if</span> <span class="br0">(</span>baker <span class="sy0">===</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">}</span><br>              <span class="kw1">if</span> <span class="br0">(</span>cooper <span class="sy0">===</span> <span class="nu0">1</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">}</span><br>              <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span> <span class="sy0">===</span> fletcher <span class="sy0">||</span> fletcher <span class="sy0">===</span> <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span><br>                <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span><br>              <span class="br0">}</span><br>              <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="br0">(</span>miller <span class="sy0">&gt;</span> cooper<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">}</span><br>              <span class="kw1">if</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">===</span> Math.<span class="me1">abs</span><span class="br0">(</span>smith <span class="sy0">-</span> fletcher<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span><br>                <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span><br>              <span class="br0">}</span><br>              <span class="kw1">if</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">===</span> Math.<span class="me1">abs</span><span class="br0">(</span>fletcher <span class="sy0">-</span> cooper<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span><br>                <span class="kw1">return</span> amb<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span><br>              <span class="br0">}</span><br>              console.<span class="me1">log</span><span class="br0">(</span><span class="br0">{</span><br>                baker<span class="sy0">:</span> baker<span class="sy0">,</span><br>                cooper<span class="sy0">:</span> cooper<span class="sy0">,</span><br>                fletcher<span class="sy0">:</span> fletcher<span class="sy0">,</span><br>                miller<span class="sy0">:</span> miller<span class="sy0">,</span><br>                smith<span class="sy0">:</span> smith<br>              <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>            <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>          <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>      <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div><br><br>The idea of using 'amb' for non-deterministic programming is due to the father of Lisp John McCarthy. However, this implementation is mine, and I'm rather pleased with it. Implementation gets a little big ugly because we're having to do all the book keeping around 'amb' ourselves (if amb were integrated with scheem, the ugliness of having to pass new versions of amb into continuations would be hidden away in evaluator)		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1587">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="Angry_Lawyer" href="http://nathansuniversity.com/vanilla/profile/161/Angry_Lawyer" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/n52YQV4YQMLLJ.png" alt="Angry_Lawyer" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/161/Angry_Lawyer">Angry_Lawyer</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1587#Comment_1587" class="Permalink" name="Item_11" rel="nofollow">May 23</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			So, here's what I got.<br><br><a href="https://github.com/AngryLawyer/PL101/tree/master/lesson%207%20-%20continuations" target="_blank" rel="nofollow">https://github.com/AngryLawyer/PL101/tree/master/lesson 7 - continuations</a><br><br>I couldn't figure out how to enThunken tree node insertion at all - did anyone else have any luck?		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1588">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="fzan" href="http://nathansuniversity.com/vanilla/profile/174/fzan" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar.php" alt="fzan" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/174/fzan">fzan</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1588#Comment_1588" class="Permalink" name="Item_12" rel="nofollow">May 23</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a rel="nofollow" href="http://nathansuniversity.com/vanilla/profile/Angry_Lawyer">@Angry_Lawyer</a><br>it really is not that difficult, if you follow the steps. First, a recursive binary tree insertion function:<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> insert <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>tree<span class="sy0">,</span>value<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">if</span><span class="br0">(</span>tree <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> <span class="br0">{</span>data<span class="sy0">:</span>value<span class="sy0">,</span> left<span class="sy0">:</span><span class="kw2">null</span><span class="sy0">,</span> right<span class="sy0">:</span><span class="kw2">null</span><span class="br0">}</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">if</span><span class="br0">(</span>value <span class="sy0">&lt;=</span> tree.<span class="me1">data</span><span class="br0">)</span> <span class="br0">{</span><br>		tree.<span class="me1">left</span> <span class="sy0">=</span> insert<span class="br0">(</span>tree.<span class="me1">left</span><span class="sy0">,</span>value<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>		tree.<span class="me1">right</span> <span class="sy0">=</span> insert<span class="br0">(</span>tree.<span class="me1">right</span><span class="sy0">,</span>value<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> tree<span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div><br><br>We just follow the tree until we can create a new branch, then proceed modifying existing branches. Now for the CPS version:<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> insertCPS <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>tree<span class="sy0">,</span>value<span class="sy0">,</span>cont<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">if</span><span class="br0">(</span>tree <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> cont<span class="br0">(</span><span class="br0">{</span>data<span class="sy0">:</span>value<span class="sy0">,</span> left<span class="sy0">:</span><span class="kw2">null</span><span class="sy0">,</span> right<span class="sy0">:</span><span class="kw2">null</span><span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw2">var</span> isLeft <span class="sy0">=</span> value <span class="sy0">&lt;=</span> tree.<span class="me1">data</span><span class="sy0">;</span><br>	<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>newBranch<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">if</span><span class="br0">(</span>isLeft<span class="br0">)</span> <span class="br0">{</span>tree.<span class="me1">left</span><span class="sy0">=</span>newBranch<span class="sy0">;</span><span class="br0">}</span><br>		<span class="kw1">else</span>       <span class="br0">{</span>tree.<span class="me1">right</span><span class="sy0">=</span>newBranch<span class="sy0">;</span><span class="br0">}</span><br>		<span class="kw1">return</span> cont<span class="br0">(</span>tree<span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> insertCPS<span class="br0">(</span> isLeft<span class="sy0">?</span>tree.<span class="me1">left</span><span class="sy0">:</span>tree.<span class="me1">right</span><span class="sy0">,</span>value<span class="sy0">,</span>cnt <span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div><br><br>Where we do the same thing, but in the continuation function.<br>For the thunk version is really just wrapping function call into a thunk:<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> insertThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>tree<span class="sy0">,</span>value<span class="sy0">,</span>cont<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">if</span><span class="br0">(</span>tree<span class="sy0">===</span><span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span><span class="br0">{</span>data<span class="sy0">:</span>value<span class="sy0">,</span>left<span class="sy0">:</span><span class="kw2">null</span><span class="sy0">,</span>right<span class="sy0">:</span><span class="kw2">null</span><span class="br0">}</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw2">var</span> isLeft <span class="sy0">=</span> value <span class="sy0">&lt;=</span> tree.<span class="me1">data</span><span class="sy0">;</span><br>	<span class="kw2">var</span> cnt <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>newBranch<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">if</span><span class="br0">(</span>isLeft<span class="br0">)</span> <span class="br0">{</span>tree.<span class="me1">left</span><span class="sy0">=</span>newBranch<span class="sy0">;</span><span class="br0">}</span><br>		<span class="kw1">else</span>       <span class="br0">{</span>tree.<span class="me1">right</span><span class="sy0">=</span>newBranch<span class="sy0">;</span><span class="br0">}</span><br>		<span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span><span class="br0">[</span>tree<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> thunk<span class="br0">(</span>insertThunk<span class="sy0">,</span><span class="br0">[</span> isLeft<span class="sy0">?</span>tree.<span class="me1">left</span><span class="sy0">:</span>tree.<span class="me1">right</span><span class="sy0">,</span>value<span class="sy0">,</span>cnt <span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div><br><br>Hope this helps		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1590">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="Angry_Lawyer" href="http://nathansuniversity.com/vanilla/profile/161/Angry_Lawyer" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/n52YQV4YQMLLJ.png" alt="Angry_Lawyer" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/161/Angry_Lawyer">Angry_Lawyer</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1590#Comment_1590" class="Permalink" name="Item_13" rel="nofollow">May 23</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Makes a lot more sense, now, cheers.		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1597">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="rhseeger" href="http://nathansuniversity.com/vanilla/profile/298/rhseeger" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(5).php" alt="rhseeger" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/298/rhseeger">rhseeger</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1597#Comment_1597" class="Permalink" name="Item_14" rel="nofollow">May 25</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a href="https://github.com/RHSeeger/PL101-Nathans-Unitversity-Compilers/tree/gh-pages/lesson7" target="_blank" rel="nofollow">https://github.com/RHSeeger/PL101-Nathans-Unitversity-Compilers/tree/gh-pages/lesson7</a><br><br>Sad to say, I didn't get very complex with the single function I implemented. I wanted to create something that took additional inputs and used them in a closure, so I went with a "list join" type functionality. The join character doesn't change, so that's captured in a closure by the internal function.<br><br>I'll admit, I've never really "gotten" continuation passing style. I understand the use for continuations in general (to stop execution where you are and "come back to it" later, likely when you have more information you need... almost like a callback with inherent state), and thunks (especially for lazy evaluation), and tail call recursion. That being said, CPS in particular always seems to take simple code and make it much more complex.<br><br>I think I need to spend some time reading up on just why CPS is a good idea.		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1601">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="dscleaver" href="http://nathansuniversity.com/vanilla/profile/270/dscleaver" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/n7QGM4GGZQJF2.jpg" alt="dscleaver" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/270/dscleaver">dscleaver</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1601#Comment_1601" class="Permalink" name="Item_15" rel="nofollow">May 25</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Here's the binary tree counting from the Javascript review.<div class="geshi_syntax"><table><tbody><tr><td><div class="code"><pre class="javascript"><span class="kw2">var</span> count <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>btree<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span><span class="br0">(</span>btree <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span><br>  <span class="kw1">return</span> <span class="nu0">1</span> <span class="sy0">+</span> count<span class="br0">(</span>btree.<span class="me1">left</span><span class="br0">)</span> <span class="sy0">+</span> count<span class="br0">(</span>btree.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw2">var</span> countCPS <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>btree<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span><span class="br0">(</span>btree <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span><br>    <span class="kw1">return</span> cont<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="kw2">var</span> first_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>leftCount<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> second_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>rightCount<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw1">return</span> cont<span class="br0">(</span><span class="nu0">1</span> <span class="sy0">+</span> leftCount <span class="sy0">+</span> rightCount<span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> countCPS<span class="br0">(</span>btree.<span class="me1">right</span><span class="sy0">,</span> second_cont<span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="sy0">;</span><br>  <span class="kw1">return</span> countCPS<span class="br0">(</span>btree.<span class="me1">left</span><span class="sy0">,</span> first_cont<span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw2">var</span> countThunk <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>btree<span class="sy0">,</span> cont<span class="br0">)</span> <span class="br0">{</span><br>  <span class="kw1">if</span><span class="br0">(</span>btree <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span> <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="kw2">var</span> first_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>leftCount<span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw2">var</span> second_cont <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">(</span>rightCount<span class="br0">)</span> <span class="br0">{</span><br>      <span class="kw1">return</span> thunk<span class="br0">(</span>cont<span class="sy0">,</span> <span class="br0">[</span><span class="nu0">1</span><span class="sy0">+</span>leftCount<span class="sy0">+</span>rightCount<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">return</span> thunk<span class="br0">(</span>countThunk<span class="sy0">,</span> <span class="br0">[</span>btree.<span class="me1">right</span><span class="sy0">,</span> second_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">}</span><span class="sy0">;</span><br>  <span class="kw1">return</span> thunk<span class="br0">(</span>countThunk<span class="sy0">,</span> <span class="br0">[</span>btree.<span class="me1">left</span><span class="sy0">,</span> first_cont<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><span class="sy0">;</span></pre></div></td></tr></tbody></table></div>		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1608">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="jostylr" href="http://nathansuniversity.com/vanilla/profile/567/jostylr" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(6).php" alt="jostylr" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/567/jostylr">jostylr</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1608#Comment_1608" class="Permalink" name="Item_16" rel="nofollow">May 25</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			I implemented a linked list class using stacks: <br><br><a href="https://github.com/jostylr/nathansuniversity/blob/master/week7/list/list.js" target="_blank" rel="nofollow">https://github.com/jostylr/nathansuniversity/blob/master/week7/list/list.js</a><br><br>It allows one to link list elements in various ways. As an example, I have a deck of cards represented and shuffle it three times. All three shuffles are threaded into the same deck of cards. So from any given card, one can proceed via the original ordering or any of the three shuffled orders. 		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1614">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="pdcawley" href="http://nathansuniversity.com/vanilla/profile/810/pdcawley" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(4).php" alt="pdcawley" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/810/pdcawley">pdcawley</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1614#Comment_1614" class="Permalink" name="Item_17" rel="nofollow">May 26</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			<a rel="nofollow" href="http://nathansuniversity.com/vanilla/profile/rhseeger">@rhseeger</a> - I think CPS is really a stop on the way to more useful things like thunking or playing nicely with the event loop. I'd rather get to thunking and trampolines by way of CPS than jump straight from recursive functions, for instance.<br><br>Also, how are you ever going to understand <code>call/cc</code> if you've not wrapped your head around continuation passing style?		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1617">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="McLeopold" href="http://nathansuniversity.com/vanilla/profile/484/McLeopold" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(7).php" alt="McLeopold" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/484/McLeopold">McLeopold</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1617#Comment_1617" class="Permalink" name="Item_18" rel="nofollow">May 26</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Greatest Common Divisor<br><br>This recursive function isn't all that cool, since the value at the end is just passed back.  I added some logging so I could see the function calls build the "stack" and then return values on the way back.<br><br>This actually gave me the insight that the values passed into the function can be a different number and type than the values passed back through the thunks.<br><br>Here's the output:<br><pre>gcdThunk 259 111<br>gcdThunk 111 37<br>gcdThunk 37 0<br>final 37 0<br>cont 111 37 37<br>cont 259 111 37<br>value 37<br>37<br></pre><br><br><pre><br>var gcd = function (a, b) {<br>  if (b === 0) {<br>    return a;<br>  } else {<br>    return gcd(b, a % b);<br>  }<br>}<br><br>var gcdCPS = function (a, b, cont) {<br>  console.log('gcdCPS', a, b);<br>  if (b === 0) {<br>    console.log('final', a, b);<br>    return cont(a);<br>  } else {<br>    var new_cont = function (v) {<br>       console.log('cont', a, b, v);<br>       return cont(v);<br>    }<br>    return gcdCPS(b, a % b, new_cont);<br>  }<br>}<br><br>console.log(gcdCPS(259, 111, function (v) {<br>  console.log('answer', v);<br>  return v;<br>}));<br><br>var thunk = function (f, lst) {<br>  return {<br>    tag: 'thunk',<br>    func: f,<br>    args: lst<br>  };<br>};<br><br>var thunkValue = function (x) {<br>  console.log('value', x);<br>  return {<br>    tag: 'value',<br>    val: x<br>  };<br>};<br><br>var gcdThunk = function (a, b, cont) {<br>  console.log('gcdThunk', a, b);<br>  if (b === 0) {<br>    console.log('final', a, b);<br>    return thunk(cont, [a]);<br>  } else {<br>    var new_cont = function (v) {<br>       console.log('cont', a, b, v);<br>       return thunk(cont, [v]);<br>    }<br>    return thunk(gcdThunk, [b, a % b, new_cont]);<br>  }<br>}<br><br>var trampoline = function (thk) {<br>  while (true) {<br>    if (thk.tag === 'value') {<br>      return thk.val;<br>    }<br>    if (thk.tag === 'thunk') {<br>      thk = thk.func.apply(null, thk.args);<br>    }<br>  }<br>};<br>console.log(trampoline(gcdThunk(259, 111, thunkValue)));<br><br></pre>		</div>
         </div>
</li>
<li class="Item Comment" id="Comment_1619">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="nfa" href="http://nathansuniversity.com/vanilla/profile/706/nfa" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(8).php" alt="nfa" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/706/nfa">nfa</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1619#Comment_1619" class="Permalink" name="Item_19" rel="nofollow">May 26</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Hope I'm not too late! I made a pass at a thunked version of my scheem interpreter (which I rebuilt in coffeescript, using linked lists for lists and including characters and vectors!):<br><br><a href="https://github.com/tesserahub/PL101/blob/cont/scheem/evalThunk.coffee" target="_blank" rel="nofollow">https://github.com/tesserahub/PL101/blob/cont/scheem/evalThunk.coffee</a><br><br>One cool thing is that scheme provides things like promises and delays that allow you to mess with continuations and delayed evaluation. I'd like to mess around with that eventually.		</div>
         </div>
</li>
<li class="Item Comment Alt" id="Comment_1631">
   <div class="Comment">
      <div class="Meta">
         <span class="Votes"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteUp SignInPopup"><i class="ArrowSprite SpriteUp" rel="nofollow"><i>Vote Up</i></i></a><span>0</span><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="VoteDown SignInPopup"><i class="ArrowSprite SpriteDown" rel="nofollow"><i>Vote Down</i></i></a></span>         <span class="Author">
            <a title="marcmarc" href="http://nathansuniversity.com/vanilla/profile/503/marcmarc" class="ProfileLink"><img src="./Homework 7  Pimp my function - Nathan's University_files/avatar(9).php" alt="marcmarc" class="ProfilePhotoMedium"></a><a href="http://nathansuniversity.com/vanilla/profile/503/marcmarc">marcmarc</a>         </span>
         <span class="DateCreated">
            <a href="http://nathansuniversity.com/vanilla/discussion/comment/1631#Comment_1631" class="Permalink" name="Item_20" rel="nofollow">May 27</a>         </span>
                  <div class="CommentInfo">
                     </div>
               </div>
      <div class="Message">
			Here's my "getting the n-th element in a list":<br><a href="https://github.com/marcbelmont/Nathans-university/blob/master/continuations/lists.js" target="_blank" rel="nofollow">https://github.com/marcbelmont/Nathans-university/blob/master/continuations/lists.js</a>		</div>
         </div>
</li>
</ul>
   <div class="Foot">
      <a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function%3Fpost%23Form_Body" class="TabLink SignInPopup">Add a Comment</a> 
   </div>
   </div>
         <div id="Panel"><div class="Box GuestBox">
   <h4>Howdy, Stranger!</h4>
   <p>It looks like you're new here. If you want to get involved, click one of these buttons!</p>
      
   <div class="P"><a href="http://nathansuniversity.com/vanilla/entry/signin?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="Button SignInPopup">Sign In</a> <a href="http://nathansuniversity.com/vanilla/entry/register?Target=discussion%2F83%2Fhomework-7-pimp-my-function" class="Button ApplyButton">Apply for Membership</a></div>   </div><div class="Box BoxCategories">
   <h4><a href="http://nathansuniversity.com/vanilla/categories/all">Categories</a></h4>
   <ul class="PanelInfo PanelCategories">
      <li><span><strong><a href="http://nathansuniversity.com/vanilla/discussions">All Discussions</a></strong><span class="Count">90</span></span></li>
<li class="Depth1 Active"><strong><a href="http://nathansuniversity.com/vanilla/categories/pl101">PL101</a></strong><span class="Count">75</span></li>
<li class="Depth1"><strong><a href="http://nathansuniversity.com/vanilla/categories/general">General</a></strong><span class="Count">15</span></li>
   </ul>
</div>
   </div>
      </div>
      <div id="Foot">
			<!-- Various definitions for Javascript //-->
<div id="Definitions" style="display: none;">
<input type="hidden" id="ImageResized" value="This image has been resized to fit in the page. Click to enlarge.">
<input type="hidden" id="DiscussionID" value="83">
<input type="hidden" id="apcavailable" value="">
<input type="hidden" id="uploaderuniq" value="4fc3675287646">
<input type="hidden" id="maxuploadsize" value="2097152">
<input type="hidden" id="AnalyticsTask" value="tick">
<input type="hidden" id="LastCommentID" value="1631">
<input type="hidden" id="Vanilla_Comments_AutoRefresh" value="0">
<input type="hidden" id="TransportError" value="A fatal error occurred while processing the request.&lt;br /&gt;The server returned the following response: %s">
<input type="hidden" id="TransientKey" value="SU1SBQZAGNAL">
<input type="hidden" id="WebRoot" value="http://nathansuniversity.com/vanilla">
<input type="hidden" id="UrlFormat" value="/vanilla/{Path}">
<input type="hidden" id="Path" value="discussion/83/homework-7-pimp-my-function">
<input type="hidden" id="SignedIn" value="0">
<input type="hidden" id="ConfirmHeading" value="Confirm">
<input type="hidden" id="ConfirmText" value="Are you sure you want to do that?">
<input type="hidden" id="Okay" value="Okay">
<input type="hidden" id="Cancel" value="Cancel">
<input type="hidden" id="Search" value="Search">
</div><div><a href="http://vanillaforums.org/">Powered by Vanilla</a></div>		</div>
   </div>
	

<div class="InformMessages"></div></body></html>